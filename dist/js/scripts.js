"use strict";var app=angular.module("app",["ngMask","ngSanitize","ngRoute"]);app.config(["$interpolateProvider","$httpProvider",function(e,t){t.defaults.useXDomain=!0,delete t.defaults.headers.common["X-Requested-With"]}]);var popupBehavior=function(e){"open"==e&&($("section.popup").css({display:"block"}),setTimeout(function(){$("section.popup").addClass("open"),$("section.popup .inner-content").addClass("open"),$("html, body").addClass("overflowHidden")},10)),"close"==e&&($("html, body").removeClass("overflowHidden"),$("section.popup").removeClass("open"),$("section.popup .inner-content").removeClass("open"),setTimeout(function(){$("html, body").removeClass("overflowHidden"),$("section.popup").css({display:"none"})},300))};$(document).ready(function(){picturefill(),$("#open-popup").click(function(e){e.preventDefault(),popupBehavior("open")}),$("#close-popup").click(function(e){e.preventDefault(),popupBehavior("close")})}),app.controller("dishesController",["$scope","$http","$timeout","config","$window","$filter",function(e,t,n,o,a,s){e.items=[],e.dishes=[],e.restaurants=[],e.restaurant=null,e.getAll=function(){t.get("/dishes_data").success(function(t,n){e.items=t.data}),t.get("/restaurant_data").success(function(t,n){e.restaurants=t.data})},e.add=function(n){var o={name:n.name,price:n.price,timestamp:(new Date).getTime(),restaurant:{_id:e.restaurant._id}};t.post("/dishes",o).then(function(t,n){e.getAll(),e.cancel(),popupBehavior("close")},function(e){alert("Ocorreu um erro, tente novamente"),console.log(e)})},e.update=function(n){var o=n._id,a={name:n.name,price:n.price,timestamp:(new Date).getTime(),restaurant:{_id:e.restaurant._id}};t.put("/dishes/"+o,a).then(function(t,n){e.getAll(),e.cancel(),popupBehavior("close")},function(e){alert("Ocorreu um erro, tente novamente"),console.log(e)})},e["delete"]=function(n){t["delete"]("/dishes/"+n).success(function(t,n){e.getAll()})},e.setRestaurant=function(t){e.restaurant=t},e.edit=function(t,n,o){popupBehavior("open"),e.dishes._id=t,e.dishes.name=n;var a=s("filter")(e.restaurants,{_id:o});e.selected=a[0]},e.cancel=function(t){t&&t.preventDefault(),e.selected&&(e.selected=e.selected[0]),e.dishes.name=null,e.dishes._id=null,popupBehavior("close")},e.getAll()}]),app.controller("restaurantController",["$scope","$http","$timeout","config","$window",function(e,t,n,o,a){e.items=[],e.restaurant=[],e.getAll=function(){t.get("/restaurant_data").success(function(t,n){e.items=t.data})},e.add=function(n){var o={name:n.name,timestamp:(new Date).getTime()};t.post("/restaurant",o).then(function(t,n){e.getAll(),e.cancel()},function(e){alert("Ocorreu um erro, tente novamente"),console.log(e)})},e["delete"]=function(n){t["delete"]("/restaurant/"+n).success(function(t,n){e.getAll()})},e.update=function(n){var o=n._id,a={name:n.name,timestamp:(new Date).getTime()};t.put("/restaurant/"+o,a).then(function(t,n){e.getAll(),e.cancel()},function(e){alert("Ocorreu um erro, tente novamente"),console.log(e)})},e.edit=function(t,n){popupBehavior("open"),e.restaurant._id=t,e.restaurant.name=n},e.cancel=function(t){t&&t.preventDefault(),e.restaurant.name=null,e.restaurant._id=null,popupBehavior("close")},e.getAll()}]);